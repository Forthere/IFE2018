<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>IFE ECMAScript</title>
</head>
<body>
	<div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
	<button id="fade-btn">淡出</button>

	<script>
		(function(){
			var fadeObj = document.getElementById("fade-obj");
			var fadeBtn = document.getElementById("fade-btn");
			
			var timer = null;
			var opacityValue = 1;
			var isFadeOut = true;
			function changeOpacity(value) {
				clearInterval(timer);

				timer = setInterval(function() {
					fadeBtn.disabled = true;
					var speed = 0;
					opacityValue = isFadeOut ? opacityValue - 0.1 : opacityValue + 0.1;
					
					if(opacityValue <= 0 || opacityValue >= 1) {
						fadeBtn.disabled = false;
						fadeBtn.innerText = isFadeOut ? "淡入" : "淡出";
						isFadeOut = !isFadeOut;
						clearInterval(timer);
					}

					fadeObj.style.opacity = opacityValue;
					
				}, 100);
			}

			fadeBtn.onclick = function() {
				if(fadeBtn.innerText === "淡出") {
					changeOpacity(0);
				}else {
					changeOpacity(1);
				}
			}
		})();
	</script>
</body>
</html>